# Tap Initials - 英語学習ゲームアプリ仕様書

## プロジェクト概要
「Tap Initials」は英語の頭文字をタップして学習する英語学習ゲームアプリです。
ヤングアダルト以上の大人向けで、楽しみながら英語をガンガンインプットすることを目的としています。

## 技術スタック
- **フレームワーク**: Flutter
- **プラットフォーム**: Android
- **言語**: Dart
- **状態管理**: Provider
- **音声**: flutter_tts
- **CI/CD**: GitHub Actions
- **AI開発支援**: Claude Code (Claude 4)
- **テスト**: flutter_test, integration_test
- **収益**: 広告表示（AdMob）

## 開発方針
### 自律的開発の目標
1. コード品質の自動チェックと改善提案
2. セキュリティ脆弱性の早期発見
3. テストカバレッジの向上
4. パフォーマンス最適化の継続的提案
5. TODO管理と次のタスクの自動提案

### 開発ルール
- **開発手法**: TDD（Test-Driven Development）を採用
- **テスト戦略**: Red-Green-Refactor サイクルの徹底
- **コード品質**: Dart/Flutter のベストプラクティスに従う
- **UI/UX**: Material Design 3 を基本とする
- **状態管理**: 選択した状態管理パターンを一貫して使用
- **セキュリティ**: モバイルアプリのセキュリティベストプラクティスに従う
- **テスト**: ユニットテスト、ウィジェットテスト、統合テストを実装
- **パフォーマンス**: 60fps を維持し、起動時間を最適化

## ゲーム仕様

### コアゲームプレイ
**基本ルール**: 表示された英文の単語の頭文字を順番にタップしてクリアする
- 例: "This is a pen" → T-I-A-P の順にタップ
- 間違ったボタンは赤く点滅して警告（不正解扱いではない）
- 一定時間無反応なら正解ボタンを緑点滅でヒント表示

### ターゲットユーザー
- **年齢層**: ヤングアダルト以上の大人
- **英語レベル**: 初級〜中級
- **学習目標**: 英語の大量インプット

### ゲーム構成
- **1講座**: 20英文で構成
- **英文長**: 2〜3語から始まり、覚えられる範囲の単語数
- **レベル**: 最大9段階の自動調整
- **判定基準**: 単語あたりの平均クリア時間（7回加重平均）

### UI/UX設計
- **画面構成**: 英文表示エリアとボタンエリアを同程度の比率で分割
- **ボタン配置**: 5列3行のランダム配置（視認性重視）
- **スコア表示**: 連続正解数を左上に常時表示
- **音声機能**: 英文表示時・ヒント時にTTS音声再生
- **ヒント機能**: いつでも英文参照可能

### ビジュアルエフェクト
- **背景**: 黒色ベース（Dark theme）
- **背景エフェクト**: アルファベット1文字がふわふわと光りながら浮遊
- **デザインテーマ**: ネオンライト風エフェクト
- **ボタンエフェクト**: ネオングロー効果
- **パーティクル**: ゲームクリア時の祝福エフェクト
- **アニメーション**: スムーズなフェードイン/アウト

### コンテンツ管理
- **データ形式**: YAML ファイルによる講座管理
- **ファイル構成**: 1講座（20英文）= 1YAMLファイル
- **ジャンル**: 日常会話、古典物語（著作権フリー）、ビジネス、学校、旅行
- **重複**: 同じ英文の重複出題あり
- **音声**: TTS（Text-to-Speech）使用

### 収益モデル
- **広告表示**: ユーザーがハマったと判断した時にたまに表示
- **オンライン必須**: 広告表示のためオフライン対応は不要
- **アカウント機能**: 実装しない（シンプル性重視）

### 統計・進捗機能
- **メイン指標**: 連続正解数（常に上昇し続けるポジティブ設計）
- **レベル調整**: 20英文クリア後に単語あたり平均時間で自動調整
- **データ保存**: ローカルストレージのみ（アカウント不要）

## 技術仕様

### 必要なパッケージ
- **flutter_tts**: 音声読み上げ
- **provider**: 状態管理
- **google_mobile_ads**: 広告表示
- **shared_preferences**: ローカルデータ保存
- **animated_background**: 背景アニメーション
- **shimmer**: ネオンエフェクト
- **yaml**: YAML講座ファイル読み込み

## ディレクトリ構造
```
/
├── .github/workflows/    # GitHub Actions設定
├── android/             # Android固有の設定
├── lib/                 # Dartソースコード
│   ├── main.dart       # エントリーポイント
│   ├── screens/        # 画面ウィジェット
│   │   ├── home_screen.dart
│   │   ├── game_screen.dart
│   │   └── statistics_screen.dart
│   ├── widgets/        # 再利用可能なウィジェット
│   │   ├── initial_button.dart
│   │   ├── score_display.dart
│   │   ├── floating_letters.dart
│   │   ├── neon_button.dart
│   │   └── particle_background.dart
│   ├── models/         # データモデル
│   │   ├── sentence.dart
│   │   ├── game_state.dart
│   │   └── user_progress.dart
│   ├── providers/      # 状態管理
│   │   ├── game_provider.dart
│   │   └── progress_provider.dart
│   ├── services/       # サービス
│   │   ├── tts_service.dart
│   │   ├── sentence_service.dart
│   │   └── ad_service.dart
│   └── utils/          # ユーティリティ
│       └── constants.dart
├── test/               # テストファイル
├── assets/             # 講座データ
│   └── courses/        # YAML講座ファイル
│       ├── level1/
│       ├── level2/
│       └── ...
├── CLAUDE.md           # この仕様書
├── pubspec.yaml        # Flutter依存関係
└── .env.example        # 環境変数のサンプル
```

## 開発フェーズ
1. **フェーズ1**: コアゲーム機能実装
   - 英文表示とTTS
   - 頭文字ボタン生成とタップ処理
   - スコア表示
   - ダークテーマ基本UI
2. **フェーズ2**: ビジュアルエフェクト実装
   - 浮遊アルファベット背景エフェクト
   - ネオングローボタン
   - パーティクルアニメーション
   - ゲームらしい演出
3. **フェーズ3**: レベル調整システム
   - 時間測定と平均計算
   - レベル自動調整
4. **フェーズ4**: 英文コンテンツ作成
   - 各ジャンルの英文データベース作成
   - レベル別コンテンツ分類
5. **フェーズ5**: 広告統合とポリッシュ
   - AdMob実装
   - 最終UI/UX調整

## 自律開発での注意点
- 新しい機能を追加する際は、この仕様書を更新すること
- セキュリティに関わる変更は特に慎重に行うこと
- 破壊的変更を行う前は、必ず理由を明記すること

## 環境設定
環境変数の設定については `.env.example` を参照してください。

## 連絡事項
このプロジェクトは Claude Code による自律的開発の実験的取り組みです。